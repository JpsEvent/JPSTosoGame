# JPSTosoGame

# 1.サーバーに接続すると初期リスポーンで待機
- [x] エメラルドブロックをクリックで`prisonLocation`へTP
- [x] スポーン位置を`prisonLocation`へ
- [x] レッドストーンブロックをクリックで`opningGameLocation`へTP
- [x] スポーン位置を`prisonLocation`へ

# 2.opゲーム
- [x] ダイヤモンドブロックをクリックで抽選
- [x] 10%の確立でアウト、90%の確立でセーフ

## アウトな場合：
全体メッセージで
<playerID>抽選中・・・

3秒後に
#cアウト
- [x] ハンターボックスの前のブロックが爆発＋花火が上がる
- [x] 全員にsendtitle「#5逃走中スタート」、ウィザースポーンサウンド
- [x] <gameBossBar>起動

## セーフな場合：
全体メッセージで
<playerID>抽選中・・・
３秒後に
#bセーフ

<gameBossBar>について
- [x] 表示：残り時間：m分s秒

- [x] 40分残り時間を表示する

# 第１ミッション
概要：

https://www.youtube.com/live/17wE4YJJrD8?si=CrX74Q_qEUkBS_Uj&t=1627
- [x] 感圧板を牢屋前の所定の場所に設置でクリア
  その感圧板をすべて設置すると牢屋が解放できるシステムを作れる

3分経過時
- [x] タイトル：#e第１ミッション：捕まった仲間を救出せよ
- [x] サウンド：item.goat_horn.sound.4

<shopLoc>に村人が出現
その村人をクリックすると<Item1JP>払いブラックストーン感圧板が１個手に入る。
全体メッセージ：#b<player>が感圧版を購入しました。
<Item1JP>持ってなかった場合メッセージ:#cJPが足りないため、購入きません。

磨かれた安山岩の上に磨かれたブラックストーンの感圧版を置いたら
- [x]　・花火が上がる
- [x]　・全体にメッセージ:#b<player>が感圧版を設置した
- [x]　３つすべてに置かれたとき
タイトル：#b牢屋が解放した
サウンド：item.goat_horn.sound.1

<shopLoc>はコマンド設定
<Item1JP>はconfigで変更


●第2ミッション
概要：ハンター強化イベントを阻止する
所定の時間までに黒曜石破壊できたらクリア。
できなかったらハンター強化

- [x] 経過15分で発生
- [x] タイトル：#e第２ミッション：ハンター強化イベントを阻止せよ
- [x] サウンド：item.goat_horn.sound.4
- [x]それぞれの<CoreLocation>のブロックが黒曜石に変わる

- [x] 黒曜石を壊すと
  全体メッセージ:#b<player>がコアを破壊しました。残りコア(xCore/yCore)
- [x] サウンド：ハープサウンド
- [x] その場所から花火が上がる
  (xCore/yCore)は壊したコア個数/すべてのコア個数

すべて壊すと
- [x] タイトル:#b第２ミッションクリア
- [x] サウンド：item.goat_horn.sound.1

- [x] 残り15分までにコアが１個でも残っていると
- [x] ハンターに移動速度上昇レベル1 infinity trueが付与

- [x] タイトル:#c第２ミッション失敗
- [x] サウンド：item.goat_horn.sound.5

# 第3ミッション
概要：羊毛をクラフトしてアイテムをゲットして生き残る
所定の時間までに青と赤の羊毛をクラフトして鍵をゲット
- [x 鍵を持っていないプレイヤーは全員死亡（牢屋送り）

- [x] 残り12分で発生
- [x] タイトル：#e第３ミッション：脱出のカギをゲットせよ
- [x] サウンド：item.goat_horn.sound.4

- [x] ゲームモードサバイバルのプレイヤーにランダムに赤or青の羊毛を渡す
- [x] この時、赤の羊毛と青の羊毛を持っているプレイヤーの数が同じor＋－1になるように配る。
  ※ランダムなので赤羊毛を持っている人が圧倒的に多くなる状況ケア

- [x] 赤と青の羊毛をクラフトでトリップワイヤーフックが作れるように。
- [x] 名前を「#g脱出のカギ」に変更

- [ ] ゲーム時間残り0秒のとき
- [x] サバイバルモードかつ、インベントリにトリップワイヤーフックを持っていないプレイヤーをkillする。（牢屋送り）
- [x] その後、サバイバルモードのプレイヤーが動けないようにする。※クリエ、スペクは動ける
- [ ] タイトル：#cゲーム終了
- [ ] サウンド：entity.ender_dragon.death


# 脱出ミッション
概要：エリアから脱出できたらゲームクリア

https://www.youtube.com/live/17wE4YJJrD8?si=2CsLjB_RoxR9HNWc&t=3992

- [x] 金の斧右クリックでその場所に雷を落とす
- [x] 全員が動けるように
- [x] タイトル：#c最終ミッション：エリアから脱出せよ
- [x] サウンド：item.goat_horn.sound.5
- [x] <escapeBossBar>起動

## <escapeBossBar>について
15分タイマー
残り時間：ｍ分ｓ秒

- [x] 所定の範囲にプレイヤーが入ると
  全体メッセージ：#b<player>が脱出に成功しました
- [x] サウンド：ui.toast.challenge_complete
- [x] 脱出したプレイヤーへタイトル：#b脱出に成功しました
- [x] プレイヤーを<goalLocation>へTP、その場所から花火を上げる

- [x] 残り時間が5分になると
  ハンターがクリエイティブモードに
- [x] タイトル：#cハンター飛行開始
- [x] サウンド：entity.wither.spawn

- [x] 残り０秒になると
- [x] タイトル：#5ゲーム終了
- [x] サウンド：entity.wither.death
- [x] 全員エフェクト発光
- [x] チャット欄に<goalLocation>へTPされた人を脱出した順に表示
  今回脱出できたメンバー：
  <player1>
  <player2>
  <player3>
  ・
  ・
  ・

- [x] チャット欄にハンターがキルした人数を表示
  #cハンター確保数：
  #c<player1>:21体
  #c<player2>:15体
  #c<player3>:10体
  ・
  ・
  ・


# アイテム
特定のアイテムをクリックして使用。
使用すると能力が発動し、そのアイテムを１つ消費

- [x] 羽：俊敏エフェクト10が5秒つく
- [x] ガストの涙：自分と自分の周り５マスのプレイヤーが透明化＋俊敏レベル10がつく
- [x] 雪玉：当たると10マス飛ぶ雪玉を投げる

## ●ハンターについて

- [x] ネザライトフル装備、エンチャント束縛の呪いをつける
  ネザライト剣
  ネザライト剣は右クリックで投げれる。クールタイム30秒。投げている間は剣は使えない。届く範囲は7マス。
  ネザライト剣で殴られたプレイヤーは死亡

- [ ] TABキー、チャット、プレイヤー上タグが赤い
  プレフィックス[ハンター]がつく
  ハンター同士の攻撃は通らない
  ハンター以外のチャットは聞こえない
  プレイヤーを確保（キル）した場合、雷を落とす（雷のダメージは食らわない）
  最後に誰が何キルしたか確認用にキル数を保存

## プレイヤーについて
プレフィックス[逃走者]がつく
プレイヤー同士攻撃はできない
プレイヤーの声はハンターに聞こえない

## コマンド
- [x] /jtg set openingGameLocation ・・・今いる場所を<opningGameLocation>に設定
- [x] /jtg set prisonLocation　・・・今いる場所を<prisonLocation>に設定
- [x] /jtg set shopLoc ・・・今いる場所を<shopLoc>に設定
- [x] /jtg set coreloc ・・・今いる場所を<CoreLocation>に設定
- [x] /jtg set goalLocation　・・・今いる場所を<goalLocation>に設定


# その他
- [x] op持ち以外はブロックの破壊、設置ができないが、
  磨かれたブラックストーン感圧板のみ、磨かれた安山岩の上における。
- [x] 磨かれたブラックストーン感圧板は壊すことができない。
- [x] ダイヤモンドピッケルでのみ黒曜石を破壊できる
- [x] ボスバーは途中参加者にも表示されるように
- [ ] ハンター、逃走者のチャットメッセージはクリエイティブモード、スペクテーターの人は聞こえる
  ショップはVillager Marketプラグインの機能

https://www.spigotmc.org/resources/villager-market-the-ultimate-shop-plugin.82965/
- [ ] 経験値に所持JPを表示


# configについて
gameTime:　ゲーム全体の秒数
placeBlockMissionTime:　第1ミッション開始経過秒数
breakMissionTime:　第2ミッション開始経過秒数
craftMissionTime:　第3ミッション開始経過秒数
escapeMission: これ無視で大丈夫です。
coolTime: 抽選？のクールダウンタイムです。
breakFailedTime: breakMissionがスタートしてから設定した経過時間後にミッション失敗させるかを設定できる
craftFailedTime: 上記同様
finishTime:　最終ミッションの秒数
flyTime: 最終ミッションスタートしてから設定した経過時間後に飛行可能とする。
